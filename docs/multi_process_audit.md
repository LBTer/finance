# 20250621
需求更新，所有的价格信息，如果没有填写过，详情应该展示未填写的信息
是否需要分开海外订单和国内订单等？
需要分阶段审核：
- 第一阶段，销售只需要输入什么信息
- 第二阶段，内勤人员应该录入什么信息，是否还需要分阶段，分几个阶段录入，例如采购成本等，是否需要单独的页面
- 不同来源的订单（阿里、国内、展会），是否需要不同的信息？区分开

# 表格更新
- 需要加入订单类型（阿里、国内、展会）
- 加入订单阶段，分为几个阶段：第一阶段（初次创建，信息补充阶段），第二阶段（待后勤审核），第三阶段（后勤审核通过，信息补充阶段），第四阶段（待最终审核），第五阶段（超级/高级用户审核通过）
- 第一阶段：销售人员创建了记录，但是还需要确认/提交部分信息
- 第二阶段：销售信息准备完毕，提交至第一次待审核，提交后不可修改信息，除非撤回第一阶段
- 第三阶段：后勤人员审核并通过了了记录，此时销售人员不可修改记录，后勤人员可以修改补充记录信息。此阶段时，后勤人员可以把订单撤退回第一阶段
- 第四阶段：后勤人员信息准备完毕，提交至第二次待审核，提交后不可修改信息，除非撤回第三阶段
- 第五阶段：超级用户或者高级用户审核并通过了记录，此时销售人员和后勤人员均不可以修改信息，只有超级用户或者高级用户可以修改

# 需要按照这个逻辑更新代码逻辑

# 用户管理
- 以前是超级用户/高级用户/简单用户，其中简单用户分成两种职能，销售用户和后勤用户，普通用户可以是销售用户/后勤用户/销售和后勤用户，三种
- 销售用户负责创建销售记录，可以提交至第二阶段，但是在第二阶段以及之后，不能修改信息。不过销售用户可以把自己第二阶段的订单退回至第一阶段
- 后勤用户可以审核第二阶段的记录，审核后记录变为第三阶段，并且后续可以通过修改记录补充信息；也可以把第三阶段的记录退回第一阶段，让销售用户修改信息；信息准备完后，后勤用户可以把第三阶段的记录提交至第四阶段。同样后勤用户可以把第四阶段的订单退回第三阶段
- 最后，只有超级用户和高级用户可以审核第四阶段的订单，审核后销售用户和后勤用户均不能再更改订单信息，只有超级用户和高级用户可以更新
- 超级用户和高级用户拥有所有的职能

# 新增运费展示页和采购展示页
- 运费展示页，按照时间顺序分页展示运费条目，列出运费的基本信息。运费展示页暂时只用于展示，创建/修改需要在销售记录管理页
- 创建运费条目，在现有的销售记录中创建，然后填写基本信息
- 后续可以编辑运费信息，如果运费信息对应的销售记录ID已经处于最终阶段了，就不可以编辑

- 采购展示页，按照时间顺序分页展示采购条目，列出采购的基本信息。采购展示页暂时只用于展示，创建/修改需要在销售记录管理页
- 创建采购条目，在现有的销售记录中创建，然后填写基本信息
- 后续可以编辑采购信息，如果运费信息对应的销售记录ID已经处于最终阶段了，就不可以编辑

# 销售记录审核逻辑
- 分成初次审核和最终审核
- 初次审核是指把销售记录的阶段从二扭转到三，最终审核是指把销售记录的阶段从四扭转到五
  - 创建完销售记录后，是阶段一（初步信息补充），只有创建记录的本人可以提交到待初步审核阶段（阶段二），这一步（创建记录，修改第一阶段的记录，提交到第二阶段）只有拥有销售职能的人可以操作（包括高级用户/超级管理员），且只能操作本人创建的记录
  - 待初步审核，是阶段二，此时谁也不能修改信息，具有后勤职能的人（包括高级用户/超级管理员）可以通过审核，扭转到阶段三
  - 运费等信息补充，是阶段三，此时，具有后勤职能的人（包括高级用户/超级管理员）可以修改数据，在修改数据时，可以创建运费/采购记录
  - 待最终审核，是阶段四，此时谁也不能修改信息，高级用户/超级管理员可以通过审核，扭转到阶段五
  - 审核完成，是阶段五，这时所有信息不能修改
- 撤回逻辑
  - 只有创建记录的本人可以把记录从阶段二撤回阶段一
  - 有后勤职能的人，可以把记录从阶段三撤回阶段阶段一，把记录从阶段四撤回成阶段三
  - 只有高级用户/超级用户可以把阶段五的记录撤回阶段三
- 附件逻辑
  - 附件分成两种类型（销售附件/后勤附件），在创建记录时和阶段一时，上传的附件是销售附件，在阶段三上传的是后勤附件
  - 销售附件只可以在创建时/阶段一修改（删除/添加），后勤附件只可以在阶段三修改（删除/添加）
- 高级用户和超级管理员，拥有所有的职能。高级用户和超级管理员都可以审核所有的销售记录

# 销售记录展示/修改逻辑
- 销售记录的展示在五个阶段应该是一致的，还需要加上订单号的展示（#阿里-1）
- 销售记录的修改，只能在一、三阶段打开，在阶段一和阶段三时，需要修改的信息不一致。
  - 阶段一需要修改的只有创建时带的信息（包括订单编号，订单编号是在阶段一可以修改的）；不能改的只有订单号（订单号是指#order_source+record-id），需要增加展示订单号并置灰；
  - 但是在阶段三，阶段一中可以修改的信息不允许修改并置灰（备注除外），同时销售附件也不能修改了。
  - 同时，在阶段三的修改中，可以创建/修改/删除销售记录对应的运费信息和采购信息，可以修改备注。

# todo 审计操作
- 所有人员的操作点击，设计修改/创建/删除的，需要记录时间、操作人、具体操作